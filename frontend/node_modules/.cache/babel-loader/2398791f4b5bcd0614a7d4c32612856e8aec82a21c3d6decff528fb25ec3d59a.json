{"ast":null,"code":"import adder from \"./adder\";\nimport { atan2, cos, quarterPi, radians, sin, tau } from \"./math\";\nimport noop from \"./noop\";\nimport stream from \"./stream\";\nexport var areaRingSum = adder();\nvar areaSum = adder(),\n  lambda00,\n  phi00,\n  lambda0,\n  cosPhi0,\n  sinPhi0;\nexport var areaStream = {\n  point: noop,\n  lineStart: noop,\n  lineEnd: noop,\n  polygonStart: function () {\n    areaRingSum.reset();\n    areaStream.lineStart = areaRingStart;\n    areaStream.lineEnd = areaRingEnd;\n  },\n  polygonEnd: function () {\n    var areaRing = +areaRingSum;\n    areaSum.add(areaRing < 0 ? tau + areaRing : areaRing);\n    this.lineStart = this.lineEnd = this.point = noop;\n  },\n  sphere: function () {\n    areaSum.add(tau);\n  }\n};\nfunction areaRingStart() {\n  areaStream.point = areaPointFirst;\n}\nfunction areaRingEnd() {\n  areaPoint(lambda00, phi00);\n}\nfunction areaPointFirst(lambda, phi) {\n  areaStream.point = areaPoint;\n  lambda00 = lambda, phi00 = phi;\n  lambda *= radians, phi *= radians;\n  lambda0 = lambda, cosPhi0 = cos(phi = phi / 2 + quarterPi), sinPhi0 = sin(phi);\n}\nfunction areaPoint(lambda, phi) {\n  lambda *= radians, phi *= radians;\n  phi = phi / 2 + quarterPi; // half the angular distance from south pole\n\n  // Spherical excess E for a spherical triangle with vertices: south pole,\n  // previous point, current point.  Uses a formula derived from Cagnoli’s\n  // theorem.  See Todhunter, Spherical Trig. (1871), Sec. 103, Eq. (2).\n  var dLambda = lambda - lambda0,\n    sdLambda = dLambda >= 0 ? 1 : -1,\n    adLambda = sdLambda * dLambda,\n    cosPhi = cos(phi),\n    sinPhi = sin(phi),\n    k = sinPhi0 * sinPhi,\n    u = cosPhi0 * cosPhi + k * cos(adLambda),\n    v = k * sdLambda * sin(adLambda);\n  areaRingSum.add(atan2(v, u));\n\n  // Advance the previous points.\n  lambda0 = lambda, cosPhi0 = cosPhi, sinPhi0 = sinPhi;\n}\nexport default function (object) {\n  areaSum.reset();\n  stream(object, areaStream);\n  return areaSum * 2;\n}","map":{"version":3,"names":["adder","atan2","cos","quarterPi","radians","sin","tau","noop","stream","areaRingSum","areaSum","lambda00","phi00","lambda0","cosPhi0","sinPhi0","areaStream","point","lineStart","lineEnd","polygonStart","reset","areaRingStart","areaRingEnd","polygonEnd","areaRing","add","sphere","areaPointFirst","areaPoint","lambda","phi","dLambda","sdLambda","adLambda","cosPhi","sinPhi","k","u","v","object"],"sources":["C:/my git/Design/frontend/node_modules/d3-geo/src/area.js"],"sourcesContent":["import adder from \"./adder\";\r\nimport {atan2, cos, quarterPi, radians, sin, tau} from \"./math\";\r\nimport noop from \"./noop\";\r\nimport stream from \"./stream\";\r\n\r\nexport var areaRingSum = adder();\r\n\r\nvar areaSum = adder(),\r\n    lambda00,\r\n    phi00,\r\n    lambda0,\r\n    cosPhi0,\r\n    sinPhi0;\r\n\r\nexport var areaStream = {\r\n  point: noop,\r\n  lineStart: noop,\r\n  lineEnd: noop,\r\n  polygonStart: function() {\r\n    areaRingSum.reset();\r\n    areaStream.lineStart = areaRingStart;\r\n    areaStream.lineEnd = areaRingEnd;\r\n  },\r\n  polygonEnd: function() {\r\n    var areaRing = +areaRingSum;\r\n    areaSum.add(areaRing < 0 ? tau + areaRing : areaRing);\r\n    this.lineStart = this.lineEnd = this.point = noop;\r\n  },\r\n  sphere: function() {\r\n    areaSum.add(tau);\r\n  }\r\n};\r\n\r\nfunction areaRingStart() {\r\n  areaStream.point = areaPointFirst;\r\n}\r\n\r\nfunction areaRingEnd() {\r\n  areaPoint(lambda00, phi00);\r\n}\r\n\r\nfunction areaPointFirst(lambda, phi) {\r\n  areaStream.point = areaPoint;\r\n  lambda00 = lambda, phi00 = phi;\r\n  lambda *= radians, phi *= radians;\r\n  lambda0 = lambda, cosPhi0 = cos(phi = phi / 2 + quarterPi), sinPhi0 = sin(phi);\r\n}\r\n\r\nfunction areaPoint(lambda, phi) {\r\n  lambda *= radians, phi *= radians;\r\n  phi = phi / 2 + quarterPi; // half the angular distance from south pole\r\n\r\n  // Spherical excess E for a spherical triangle with vertices: south pole,\r\n  // previous point, current point.  Uses a formula derived from Cagnoli’s\r\n  // theorem.  See Todhunter, Spherical Trig. (1871), Sec. 103, Eq. (2).\r\n  var dLambda = lambda - lambda0,\r\n      sdLambda = dLambda >= 0 ? 1 : -1,\r\n      adLambda = sdLambda * dLambda,\r\n      cosPhi = cos(phi),\r\n      sinPhi = sin(phi),\r\n      k = sinPhi0 * sinPhi,\r\n      u = cosPhi0 * cosPhi + k * cos(adLambda),\r\n      v = k * sdLambda * sin(adLambda);\r\n  areaRingSum.add(atan2(v, u));\r\n\r\n  // Advance the previous points.\r\n  lambda0 = lambda, cosPhi0 = cosPhi, sinPhi0 = sinPhi;\r\n}\r\n\r\nexport default function(object) {\r\n  areaSum.reset();\r\n  stream(object, areaStream);\r\n  return areaSum * 2;\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}